/*
 Input Mask plugin for jquery
 http://github.com/RobinHerbots/jquery.inputmask
 Copyright (c) 2010 - 2012 Robin Herbots
 Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 Version: 1.2.4
*/
(function(e){void 0==e.fn.inputmask&&(e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnHover:!0,onKeyValidation:e.noop,numericInput:!1,radixPoint:".",definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451]",cardinality:1},
"*":{validator:"[A-Za-z\u0410-\u044f\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,
39,40,46,91,93,108]},val:e.fn.val},e.fn.inputmask=function(G,V){function O(b){return(b=a.aliases[b])?(b.alias&&O(b.alias),e.extend(!0,a,b),e.extend(!0,a,V),!0):!1}function P(){var b=!1,c=0;1==a.mask.length&&0==a.greedy&&(a.placeholder="");for(var r=e.map(a.mask.split(""),function(r,d){var h=[];if(r==a.escapeChar)b=!0;else if(r!=a.optionalmarker.start&&r!=a.optionalmarker.end||b){var e=a.definitions[r];if(e&&!b)for(var k=0;k<e.cardinality;k++)h.push(F(c+k));else h.push(r),b=!1;c+=h.length;return h}}),
h=r.slice(),k=1;k<a.repeat&&a.greedy;k++)h=h.concat(r.slice());return h}function Q(){var b=!1,c=!1,r=!1;return e.map(a.mask.split(""),function(h,e){var k=[];if(h==a.escapeChar)c=!0;else{if(h!=a.optionalmarker.start||c){if(h!=a.optionalmarker.end||c){var d=a.definitions[h];if(d&&!c){for(var g=d.prevalidator,l=g?g.length:0,t=1;t<d.cardinality;t++){var n=l>=t?g[t-1]:[],x=n.validator,n=n.cardinality;k.push({fn:x?"string"==typeof x?new RegExp(x):new function(){this.test=x}:/./,cardinality:n?n:1,optionality:b,
newBlockMarker:1==b?r:!1,offset:0,casing:d.casing,def:h});1==b&&(r=!1)}k.push({fn:d.validator?"string"==typeof d.validator?new RegExp(d.validator):new function(){this.test=d.validator}:/./,cardinality:d.cardinality,optionality:b,newBlockMarker:r,offset:0,casing:d.casing,def:h})}else k.push({fn:null,cardinality:0,optionality:b,newBlockMarker:r,offset:0,casing:null,def:h}),c=!1;r=!1;return k}b=!1}else b=!0;r=!0}})}function J(b,c,r,h){var e=!1;if(0<=b&&b<t()){for(var e=b%l.length,g=c?1:0,d="",n=l[e].cardinality;n>
g;n--)d+=B(r,e-(n-1));c&&(d+=c);e=null!=l[e].fn?l[e].fn.test(d,r,b,h,a):!1}setTimeout(a.onKeyValidation.call(this,e,a),0);return e}function C(b){b=l[b%l.length];return void 0!=b?b.fn:!1}function F(b){return a.placeholder.charAt(b%a.placeholder.length)}function t(){var b=g.length;!a.greedy&&1<a.repeat&&(b+=g.length*(a.repeat-1));return b}function D(b,a){var c=t();if(a>=c)return c;for(var e=a;++e<c&&!C(e););return e}function K(b,a){var c=a;if(0>=c)return 0;for(;0<--c&&!C(c););return c}function I(b,
a,r){var c=l[a%l.length],e=r;if(void 0!=e)switch(c.casing){case "upper":e=r.toUpperCase();break;case "lower":e=r.toLowerCase()}b[a]=e}function B(a,c,e){e&&(c=R(a,c));return a[c]}function R(a,c,e){if(e)for(;0>c&&a.length<t();)for(e=g.length-1,c=g.length;void 0!==g[e];)a.unshift(g[e--]);else for(;void 0==a[c]&&a.length<t();)for(e=0;void 0!==g[e];)a.push(g[e++]);return c}function E(a,c,e){a._valueSet(c.join(""));void 0!=e&&(L?setTimeout(function(){n(a,e)},100):n(a,e))}function S(a,c,e){for(var b=t();c<
e&&c<b;c++)I(a,c,B(g.slice(),c))}function M(a,c){I(a,c,B(g,c%l.length))}function u(b,c,r,h){var k=e(b).data("inputmask").isRTL,n=N(b._valueGet(),k).split("");if(k){var d=t();var v=n.reverse();v.length=d;for(var w=0;w<d;w++){var u=(d-(w+1))%l.length;null==l[u].fn&&v[w]!=B(g,u)?(v.splice(w,0,B(g,u)),v.length=d):v[w]=v[w]||B(g,u)}n=v.reverse()}S(c,0,c.length);c.length=g.length;var A=v=-1,x;d=t();for(var z=n.length,u=0==z?d:-1,w=0;w<z;w++)for(var y=A+1;y<d;y++)if(C(y)){var f=n[w];!1!==(x=J(y,f,c,!r))?
(!0!==x&&(y=x.pos||y,f=x.c||f),I(c,y,f),v=A=y):(M(c,y),f==F(y)&&(u=A=y));break}else if(M(c,y),v==A&&(v=y),A=y,n[w]==B(c,y))break;if(0==a.greedy)for(w=N(c.join(""),k).split("");c.length!=w.length;)k?c.shift():c.pop();r&&E(b,c);return k?a.numericInput?-1!=e.inArray(a.radixPoint,c)&&!0!==h?e.inArray(a.radixPoint,c):D(c,d):D(c,u):D(c,v)}function W(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")}function N(a,c){return c?a.replace(new RegExp("^("+W(g.join(""))+
")*"),""):a.replace(new RegExp("("+W(g.join(""))+")*$"),"")}function T(a,c){u(a,c,!1);var b=c.slice();if(e(a).data("inputmask").isRTL)for(var h=0;h<=b.length-1;h++){var g=h%l.length;if(l[g].optionality)if(F(h)!=c[h]&&C(h))break;else b.splice(0,1);else break}else for(h=b.length-1;0<=h;h--)if(g=h%l.length,l[g].optionality)if(F(h)!=c[h]&&C(h))break;else b.pop();else break;E(a,b)}function X(a,c){var b=a[0];if(!l||!0!==c&&a.hasClass("hasDatepicker"))return b._valueGet();var h=g.slice();u(b,h);return e.map(h,
function(a,c){return C(c)&&a!=B(g.slice(),c)?a:null}).join("")}function n(b,c,e){b=b.jquery&&0<b.length?b[0]:b;if("number"==typeof c){e="number"==typeof e?e:c;0==a.insertMode&&c==e&&e++;if(b.setSelectionRange)b.setSelectionRange(c,e);else if(b.createTextRange){var h=b.createTextRange();h.collapse(!0);h.moveEnd("character",e);h.moveStart("character",c);h.select()}b.focus()}else return h=L?void 0:null,null==h&&(b.setSelectionRange?(c=b.selectionStart,e=b.selectionEnd):document.selection&&document.selection.createRange&&
(h=document.selection.createRange(),c=0-h.duplicate().moveStart("character",-1E5),e=c+h.text.length),h={begin:c,end:e}),h}function U(b){function c(a){var d=!0;a=a._valueGet();for(var c=a.length,f=0;f<c;f++)if(C(f)&&a.charAt(f)==F(f)){d=!1;break}return d}function r(a,c,e){for(;!C(a)&&0<=a-1;)a--;for(var f=a;f<c&&f<t();f++)if(C(f)){M(d,f);var b=D(d,f),Z=B(d,b);if(Z!=F(b))if(b<t()&&!1!==J(f,Z,d,!0)&&l[f%l.length].def==l[b%l.length].def)I(d,f,B(d,b)),M(d,b);else{if(C(f))break}else if(void 0==e)break}else M(d,
f);void 0!=e&&I(d,z?c:K(d,c),e);d=N(d.join(""),z).split("");0==d.length&&(d=g.slice());return a}function h(a,c,e,b){for(;a<=c&&a<t();a++)if(C(a)){var f=B(d,a);I(d,a,e);if(f!=F(a))if(e=D(d,a),e<t())if(!1!==J(e,f,d,!0)&&l[a%l.length].def==l[e%l.length].def)e=f;else if(C(e))break;else e=f;else break;else if(!0!==b)break}else M(d,a);b=d.length;d=N(d.join(""),z).split("");0==d.length&&(d=g.slice());return c-(b-d.length)}var k=e(b);if(k.is(":input")){a.greedy=a.greedy?a.greedy:0==a.repeat;var H=k.prop("maxLength");
t()>H&&-1<H&&(H<g.length&&(g.length=H),0==a.greedy&&(a.repeat=Math.round(H/g.length)),k.prop("maxLength",2*t()));k.data("inputmask",{tests:l,_buffer:g,greedy:a.greedy,repeat:a.repeat,autoUnmask:a.autoUnmask,definitions:a.definitions,isRTL:!1});(function(a){var d;Object.getOwnPropertyDescriptor&&(d=Object.getOwnPropertyDescriptor(a,"value"));d&&d.get?a._valueGet||(a._valueGet=d.get,a._valueSet=d.set,Object.defineProperty(a,"value",{get:function(){var a=e(this),d=e(this).data("inputmask");return d&&
d.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=d._buffer.join("")?this._valueGet():""},set:function(a){this._valueSet(a);e(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&a.__lookupGetter__("value")?a._valueGet||(a._valueGet=a.__lookupGetter__("value"),a._valueSet=a.__lookupSetter__("value"),a.__defineGetter__("value",function(){var a=e(this),d=e(this).data("inputmask");return d&&d.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=d._buffer.join("")?
this._valueGet():""}),a.__defineSetter__("value",function(a){this._valueSet(a);e(this).triggerHandler("setvalue.inputmask")})):(a._valueGet||(a._valueGet=function(){return this.value},a._valueSet=function(a){this.value=a}),1!=e.fn.val.inputmaskpatch&&(e.fn.val=function(){if(0==arguments.length){var a=e(this);if(a.data("inputmask")){if(a.data("inputmask").autoUnmask)return a.inputmask("unmaskedvalue");var d=e.inputmask.val.apply(a);return d!=a.data("inputmask")._buffer.join("")?d:""}return e.inputmask.val.apply(a)}var c=
arguments;return this.each(function(){var a=e(this),d=e.inputmask.val.apply(a,c);a.data("inputmask")&&a.triggerHandler("setvalue.inputmask");return d})},e.extend(e.fn.val,{inputmaskpatch:!0})))})(b);var d=g.slice(),v=b._valueGet(),w=!1,G=!1,A=-1,x=D(d,-1);K(d,t());var z=!1;if("rtl"==b.dir||a.numericInput)b.dir="ltr",k.css("text-align","right"),k.removeAttr("dir"),H=k.data("inputmask"),H.isRTL=!0,k.data("inputmask",H),z=!0;k.unbind(".inputmask");k.removeClass("focus.inputmask");k.bind("mouseenter.inputmask",
function(){if(!e(this).hasClass("focus.inputmask")&&a.showMaskOnHover){var c=this._valueGet().length;c<d.length&&(0==c&&(d=g.slice()),E(this,d))}}).bind("blur.inputmask",function(){var b=e(this),Y=this._valueGet();b.removeClass("focus.inputmask");Y!=v&&b.change();a.clearMaskOnLostFocus&&(Y==g.join("")?this._valueSet(""):T(this,d));c(this)||(b.trigger("incomplete"),a.clearIncomplete&&(a.clearMaskOnLostFocus?this._valueSet(""):(d=g.slice(),E(this,d))))}).bind("focus.inputmask",function(){var c=e(this);
if(!c.hasClass("focus.inputmask")&&!a.showMaskOnHover){var b=this._valueGet().length;b<d.length&&(0==b&&(d=g.slice()),n(this,u(this,d,!0)))}c.addClass("focus.inputmask");v=this._valueGet()}).bind("mouseleave.inputmask",function(){var c=e(this);a.clearMaskOnLostFocus&&(c.hasClass("focus.inputmask")||(this._valueGet()==g.join("")||""==this._valueGet()?this._valueSet(""):T(this,d)))}).bind("click.inputmask",function(){var a=this;setTimeout(function(){var c=n(a);c.begin==c.end&&(c=c.begin,A=u(a,d,!1),
z?n(a,c>A&&(!1!==J(c,d[c],d,!0)||!C(c))?c:A):n(a,c<A&&(!1!==J(c,d[c],d,!0)||!C(c))?c:A))},0)}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){n(a,0,A)},0)}).bind("keydown.inputmask",function(c){w=!1;var b=this;var f=c.keyCode;var q=n(b);if(a.numericInput){var m=b._valueGet().indexOf(a.radixPoint);-1!=m&&(z=q.begin<=m||q.end<=m)}if(f==a.keyCode.BACKSPACE||f==a.keyCode.DELETE||aa&&127==f){m=t();if(0==q.begin&&q.end==m)d=g.slice(),E(b,d),n(b,u(b,d,!1));else if(1<q.end-q.begin||
1==q.end-q.begin&&a.insertMode)S(d,q.begin,q.end),E(b,d,z?u(b,d,!1):q.begin);else{var p=q.begin-(f==a.keyCode.DELETE?0:1);p<x&&f==a.keyCode.DELETE&&(p=x);p>=x&&(a.numericInput&&a.greedy&&f==a.keyCode.DELETE&&d[p]==a.radixPoint&&(p=D(d,p),z=!1),z?(p=h(x,p,F(p),!0),p=a.numericInput&&a.greedy&&f==a.keyCode.BACKSPACE&&d[p+1]==a.radixPoint?p+1:D(d,p)):p=r(p,m),E(b,d,p))}b._valueGet()==g.join("")&&e(b).trigger("cleared");return!1}if(f==a.keyCode.END||f==a.keyCode.PAGE_DOWN)return setTimeout(function(){var e=
u(b,d,!1,!0);a.insertMode||e!=t()||c.shiftKey||e--;n(b,c.shiftKey?q.begin:e,e)},0),!1;if(f==a.keyCode.HOME||f==a.keyCode.PAGE_UP)return n(b,0,c.shiftKey?q.begin:0),!1;if(f==a.keyCode.ESCAPE)return b._valueSet(v),n(b,0,u(b,d)),!1;if(f==a.keyCode.INSERT)return a.insertMode=!a.insertMode,n(b,a.insertMode||q.begin!=t()?q.begin:q.begin-1),!1;if(c.ctrlKey&&88==f)setTimeout(function(){n(b,u(b,d,!0))},0);else if(!a.insertMode){if(f==a.keyCode.RIGHT)return f=q.begin==q.end?q.end+1:q.end,f=f<t()?f:q.end,n(b,
c.shiftKey?q.begin:f,c.shiftKey?f+1:f),!1;if(f==a.keyCode.LEFT)return f=q.begin-1,f=0<f?f:0,n(b,f,c.shiftKey?q.end:f),!1}a.onKeyDown.call(this,c,a);G=-1!=e.inArray(f,a.ignorables)}).bind("keypress.inputmask",function(b){var f;if(w)return!1;w=!0;var g=this,q=e(g);b=b||window.event;var m=b.which||b.charCode||b.keyCode;if(a.numericInput&&m==a.radixPoint.charCodeAt(a.radixPoint.length-1)){var p=g._valueGet().indexOf(a.radixPoint);n(g,D(d,-1!=p?p:t()))}if(b.ctrlKey||b.altKey||b.metaKey||G)return!0;if(m){q.trigger("input");
b=n(g);var p=String.fromCharCode(m),l=t();S(d,b.begin,b.end);if(z)if(m=a.numericInput?b.end:K(d,b.end),!1!==(f=J(m==l||B(d,m)==a.radixPoint?K(d,m):m,p,d,!1))){!0!==f&&(m=f.pos||b,p=f.c||p);var k=x;if(1==a.insertMode){if(1==a.greedy)for(f=d.slice();B(f,k,!0)!=F(k)&&k<=m;)k=k==l?l+1:D(d,k);if(k<=m&&(a.greedy||d.length<l))d[x]!=F(x)&&d.length<l&&(f=R(d,-1,z),0!=b.end&&(m+=f),l=d.length),r(k,a.numericInput?K(d,m):m,p);else return!1}else I(d,a.numericInput?K(d,m):m,p);E(g,d,a.numericInput&&0==m?D(d,m):
m);setTimeout(function(){c(g)&&q.trigger("complete")},0)}else L&&E(g,d,b.begin);else if(m=D(d,b.begin-1),R(d,m,z),!1!==(f=J(m,p,d,!1))){!0!==f&&(m=f.pos||m,p=f.c||p);if(1==a.insertMode){b=t();for(f=d.slice();B(f,b,!0)!=F(b)&&b>=m;)b=0==b?-1:K(d,b);if(b>=m)h(m,d.length,p);else return!1}else I(d,m,p);m=D(d,m);E(g,d,m);setTimeout(function(){c(g)&&q.trigger("complete")},0)}else L&&E(g,d,b.begin);return!1}}).bind("keyup.inputmask",function(b){var c=e(this),f=b.keyCode;a.onKeyUp.call(this,b,a);f==a.keyCode.TAB&&
c.hasClass("focus.inputmask")&&0==this._valueGet().length&&(d=g.slice(),E(this,d),z||n(this,0),v=this._valueGet())}).bind(ba+".inputmask, dragdrop.inputmask, drop.inputmask",function(){var a=this;setTimeout(function(){n(a,u(a,d,!0))},0)}).bind("setvalue.inputmask",function(){v=this._valueGet();u(this,d,!0);this._valueGet()==g.join("")&&this._valueSet("")}).bind("complete.inputmask",a.oncomplete).bind("incomplete.inputmask",a.onincomplete).bind("cleared.inputmask",a.oncleared);var A=u(b,d,!0);try{var y=
document.activeElement}catch(f){}y===b?(k.addClass("focus.inputmask"),n(b,A)):a.clearMaskOnLostFocus&&(b._valueGet()==g.join("")?b._valueSet(""):T(b,d));(function(a){var b=e._data(a).events;e.each(b,function(b,c){e(a).bind(b+".inputmask",function(a){if(this.readOnly||this.disabled)return a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),!1});for(var d=c[c.length-1],f=c.length-1;0<f;f--)c[f]=c[f-1];c[0]=d})})(b)}}var a=e.extend(!0,{},e.inputmask.defaults,V),ba=function(a){var b=document.createElement("input");
a="on"+a;var e=a in b;e||(b.setAttribute(a,"return;"),e="function"==typeof b[a]);return e}("paste")?"paste":"input",aa=null!=navigator.userAgent.match(/iphone/i),L=null!=navigator.userAgent.match(/android.*mobile safari.*/i);if(L)var ca=navigator.userAgent.match(/mobile safari.*/i),L=533>=parseInt((new RegExp(/[0-9]+/)).exec(ca));if("string"==typeof G)switch(G){case "mask":var g=P();var l=Q();return this.each(function(){U(this)});case "unmaskedvalue":return l=this.data("inputmask").tests,g=this.data("inputmask")._buffer,
a.greedy=this.data("inputmask").greedy,a.repeat=this.data("inputmask").repeat,a.definitions=this.data("inputmask").definitions,X(this);case "remove":return this.each(function(){var b=e(this),c=this;setTimeout(function(){if(b.data("inputmask")){l=b.data("inputmask").tests;g=b.data("inputmask")._buffer;a.greedy=b.data("inputmask").greedy;a.repeat=b.data("inputmask").repeat;a.definitions=b.data("inputmask").definitions;c._valueSet(X(b,!0));b.removeData("inputmask");b.unbind(".inputmask");b.removeClass("focus.inputmask");
var e;Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(c,"value"));e&&e.get?c._valueGet&&Object.defineProperty(c,"value",{get:c._valueGet,set:c._valueSet}):document.__lookupGetter__&&c.__lookupGetter__("value")&&c._valueGet&&(c.__defineGetter__("value",c._valueGet),c.__defineSetter__("value",c._valueSet));delete c._valueGet;delete c._valueSet}},0)});case "getemptymask":return this.data("inputmask")?this.data("inputmask")._buffer.join(""):"";case "hasMaskedValue":return this.data("inputmask")?
!this.data("inputmask").autoUnmask:!1;default:return O(G)||(a.mask=G),g=P(),l=Q(),this.each(function(){U(this)})}return"object"==typeof G?(a=e.extend(!0,{},e.inputmask.defaults,G),O(a.alias),g=P(),l=Q(),this.each(function(){U(this)})):this})})(jQuery);